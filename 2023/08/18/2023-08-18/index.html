<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>æ—¶é—´åºåˆ—åºåˆ—å­¦ä¹ ï¼ˆäº”ï¼‰--Prophet | vbrun-lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Prophetçš„å®‰è£…åœ¨å®‰è£…Prophetçš„æ—¶å€™å¹¶æ²¡æœ‰æƒ³å®˜ç½‘ä»‹ç»çš„é‚£ä¹ˆç®€å•ï¼Œé¦–å…ˆéœ€è¦å…ˆå®‰è£…Pystan,ä½†æ˜¯ç›´æ¥pip install pystanä¼šæŠ¥ç¼–è¯‘å™¨å†…éƒ¨é”™è¯¯ï¼Œå…ˆconda update â€“force conda ï¼Œç„¶åï¼Œconda install pystanï¼Œå†ç„¶åä½¿ç”¨pip install prophetÂ è¿›è¡Œå®‰è£…ã€‚ Prophetçš„æ¨¡å‹è®­ç»ƒåŠé¢„æµ‹ï¼Œç±»ä¼¼Sklearnçš„æ–¹æ³•ï¼Œè®­ç»ƒfit">
<meta property="og:type" content="article">
<meta property="og:title" content="æ—¶é—´åºåˆ—åºåˆ—å­¦ä¹ ï¼ˆäº”ï¼‰--Prophet">
<meta property="og:url" content="https://vbrun-lab.github.io/2023/08/18/2023-08-18/index.html">
<meta property="og:site_name" content="vbrun-lab">
<meta property="og:description" content="Prophetçš„å®‰è£…åœ¨å®‰è£…Prophetçš„æ—¶å€™å¹¶æ²¡æœ‰æƒ³å®˜ç½‘ä»‹ç»çš„é‚£ä¹ˆç®€å•ï¼Œé¦–å…ˆéœ€è¦å…ˆå®‰è£…Pystan,ä½†æ˜¯ç›´æ¥pip install pystanä¼šæŠ¥ç¼–è¯‘å™¨å†…éƒ¨é”™è¯¯ï¼Œå…ˆconda update â€“force conda ï¼Œç„¶åï¼Œconda install pystanï¼Œå†ç„¶åä½¿ç”¨pip install prophetÂ è¿›è¡Œå®‰è£…ã€‚ Prophetçš„æ¨¡å‹è®­ç»ƒåŠé¢„æµ‹ï¼Œç±»ä¼¼Sklearnçš„æ–¹æ³•ï¼Œè®­ç»ƒfit">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-08-18T06:13:56.000Z">
<meta property="article:modified_time" content="2023-08-18T06:30:05.796Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="æ—¶é—´åºåˆ—">
<meta property="article:tag" content="æœºå™¨å­¦ä¹ ">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="vbrun-lab" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">vbrun-lab</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS è®¢é˜…"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="æœç´¢"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="æœç´¢"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://vbrun-lab.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-2023-08-18" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/18/2023-08-18/" class="article-date">
  <time class="dt-published" datetime="2023-08-18T06:13:56.000Z" itemprop="datePublished">2023-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      æ—¶é—´åºåˆ—åºåˆ—å­¦ä¹ ï¼ˆäº”ï¼‰--Prophet
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="Prophetçš„å®‰è£…"><a href="#Prophetçš„å®‰è£…" class="headerlink" title="Prophetçš„å®‰è£…"></a>Prophetçš„å®‰è£…</h4><p>åœ¨å®‰è£…Prophetçš„æ—¶å€™å¹¶æ²¡æœ‰æƒ³å®˜ç½‘ä»‹ç»çš„é‚£ä¹ˆç®€å•ï¼Œé¦–å…ˆéœ€è¦å…ˆå®‰è£…Pystan,ä½†æ˜¯ç›´æ¥<code>pip install pystan</code>ä¼šæŠ¥ç¼–è¯‘å™¨å†…éƒ¨é”™è¯¯ï¼Œå…ˆconda update â€“force conda ï¼Œç„¶åï¼Œconda install pystanï¼Œå†ç„¶åä½¿ç”¨pip install prophetÂ è¿›è¡Œå®‰è£…ã€‚</p>
<p>Prophetçš„æ¨¡å‹è®­ç»ƒåŠé¢„æµ‹ï¼Œç±»ä¼¼Sklearnçš„æ–¹æ³•ï¼Œè®­ç»ƒfit()ã€é¢„æµ‹predict()ã€‚è¿™é‡Œç”±äºæˆ‘ä»¬äº†è§£æ•°æ®çš„å˜åŠ¨ä¼šå—åˆ°å­£èŠ‚ã€å‘¨ã€å¤©çš„å½±å“ï¼Œå­˜åœ¨ä¸€å®šçš„è§„å¾‹æ€§ï¼Œå› æ­¤æˆ‘ä»¬å°†è¿™ä¸‰ä¸ªå‚æ•°è®¾ç½®æˆTrueï¼Œå¹¶ä¸”é‡‡ç”¨ä¸­å›½çš„å‡æœŸæ¨¡å¼ï¼Œå…¶ä½™å‚æ•°å‡ä¿æŒé»˜è®¤ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">model = Prophet(yearly_seasonality=True, weekly_seasonality=True, daily_seasonality=True)</span><br><span class="line">model.add_country_holidays(country_name=<span class="string">&quot;CN&quot;</span>)</span><br><span class="line">model.fit(data)</span><br></pre></td></tr></table></figure>

<h4 id="Prophetå‚æ•°"><a href="#Prophetå‚æ•°" class="headerlink" title="Prophetå‚æ•°"></a>Prophetå‚æ•°</h4><p>å‚æ•°åŠé»˜è®¤å€¼ä»‹ç»ï¼Œå†…å®¹ç†è®ºå¯å‚è€ƒã€ŒåŸç†ç¯‡ã€ï¼š</p>
<p>â€¢ growthï¼šè¶‹åŠ¿å‡½æ•°è®¾ç½®ï¼Œé»˜è®¤çº¿æ€§â€œlinearâ€ï¼Œå¯é€‰éçº¿æ€§â€œlogisticâ€ã€‚<br>â€¢ changepointsï¼šé€‰æ‹©çªå˜ç‚¹ï¼Œé»˜è®¤è‡ªåŠ¨é€‰æ‹©â€œNoneâ€ã€‚ä¾‹å¦‚ï¼šåŒåä¸€è®¢å•çªå¢ï¼ŒæŒ‡å®šçªå˜ç‚¹ã€‚<br>â€¢ n_changepointsï¼šçªå˜ç‚¹ä¸ªæ•°ï¼Œé»˜è®¤â€œ25ä¸ªâ€ã€‚å¦‚æœchangepointsæŒ‡å®šï¼Œåˆ™è¿™ä¸ªå‚æ•°å°±åºŸå¼ƒäº†ï¼›å¦‚æœchangepointsæ²¡æŒ‡å®šï¼Œåˆ™ä¼šä»è¾“å…¥çš„å†å²æ•°æ®å‰80%ä¸­è‡ªåŠ¨é€‰å–25ä¸ªçªå˜ç‚¹ã€‚<br>â€¢ changepoint_rangeï¼šçªå˜ç‚¹æ•°æ®èŒƒå›´ï¼Œé»˜è®¤â€œ80%â€ã€‚åŒæ ·ï¼Œå¦‚æœchangepointsæŒ‡å®šï¼Œåˆ™è¿™ä¸ªå‚æ•°å°±åºŸå¼ƒäº†ã€‚<br>â€¢ changepoint_prior_scale: è°ƒèŠ‚â€œchangepointsâ€å‘ç°å¼ºåº¦ï¼Œé»˜è®¤â€œ0.05â€ã€‚å€¼è¶Šå¤§å¯¹å†å²æ•°æ®æ‹Ÿåˆç¨‹åº¦è¶Šå¼ºï¼Œä½†ä¼šå¢åŠ è¿‡æ‹Ÿåˆçš„é£é™©ã€‚<br>â€¢ yearly_seasonality: æ•°æ®æ˜¯å¦æœ‰å¹´å­£èŠ‚æ€§ï¼Œé»˜è®¤â€œè‡ªåŠ¨æ£€æµ‹â€ã€‚<br>â€¢ weekly_seasonality: æ•°æ®æ˜¯å¦æœ‰å‘¨å­£èŠ‚æ€§ï¼Œé»˜è®¤â€œè‡ªåŠ¨æ£€æµ‹â€ã€‚<br>â€¢ daily_seasonality: æ•°æ®æ˜¯å¦æœ‰å¤©å­£èŠ‚æ€§ï¼Œé»˜è®¤â€œè‡ªåŠ¨æ£€æµ‹â€ã€‚<br>â€¢ holidaysï¼šæŒ‡å®šèŠ‚å‡æ—¥ï¼Œé»˜è®¤â€œNoneâ€ï¼Œæ”¯æŒæ‰‹åŠ¨è¾“å…¥æŒ‡å®šèŠ‚å‡æ—¥ã€‚ä»¥DataFrameæ ¼å¼è¾“å…¥ï¼Œæ¶µç›–ï¼šå¿…é¡»åˆ—ã€holiday(string)ã€ds(date)ã€‘ã€å¯é€‰åˆ—ã€lower_window(int)ã€upper_window(int)ï¼ŒæŒ‡å®šå½±å“çš„å‰åçª—å£æœŸã€‘ã€‚<br>â€¢ seasonality_mode: å­£èŠ‚æ€§æ•ˆåº”æ¨¡å¼ï¼Œé»˜è®¤åŠ æ³•æ¨¡å¼â€œadditiveâ€ï¼Œå¯é€‰â€œmultiplicativeâ€ä¹˜æ³•æ¨¡å¼ã€‚<br>â€¢ seasonality_prior_scale: è°ƒèŠ‚å­£èŠ‚æ€§æ•ˆåº”æ¨¡å¼å¼ºåº¦ï¼Œé»˜è®¤â€œ10â€ã€‚å€¼è¶Šå¤§ï¼Œå­£èŠ‚æ€§å¯¹æ¨¡å‹å½±å“è¶Šå¤§ã€‚<br>â€¢ holidays_prior_scale: è°ƒèŠ‚èŠ‚å‡æ—¥æ¨¡å¼å¼ºåº¦ï¼Œé»˜è®¤â€œ10â€ã€‚å€¼è¶Šå¤§ï¼ŒèŠ‚å‡æ—¥å¯¹æ¨¡å‹å½±å“è¶Šå¤§ã€‚</p>
<h4 id="å®éªŒï¼šé¢„æµ‹æœªæ¥ä¸€ä¸ªæœˆçš„ç°é‡‘æµå…¥"><a href="#å®éªŒï¼šé¢„æµ‹æœªæ¥ä¸€ä¸ªæœˆçš„ç°é‡‘æµå…¥" class="headerlink" title="å®éªŒï¼šé¢„æµ‹æœªæ¥ä¸€ä¸ªæœˆçš„ç°é‡‘æµå…¥"></a>å®éªŒï¼šé¢„æµ‹æœªæ¥ä¸€ä¸ªæœˆçš„ç°é‡‘æµå…¥</h4><p><strong>ä¸€ã€ä½¿ç”¨sktimeæ¡†æ¶å†…çš„Prophet</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## sktimeæ¡†æ¶ä¸‹çš„Prophetæ— æ³•å¼•å…¥æ–°çš„ç‰¹å¾</span></span><br><span class="line">import pandas as pd</span><br><span class="line">from sktime.forecasting.fbprophet import Prophet </span><br><span class="line">from sktime.forecasting.base import ForecastingHorizon</span><br><span class="line">from sktime.forecasting.model_selection import temporal_train_test_split</span><br><span class="line">from sktime.performance_metrics.forecasting import mean_absolute_percentage_error</span><br><span class="line">from sktime.utils.plotting import plot_series</span><br><span class="line">cashflow = pd.read_csv(<span class="string">&#x27;CashFlowRecordsAll22-23-four.csv&#x27;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>)  </span><br><span class="line">cashflow[<span class="string">&#x27;date&#x27;</span>] = pd.to_datetime(cashflow[<span class="string">&#x27;date&#x27;</span>])</span><br><span class="line">cashflow.set_index(<span class="string">&#x27;date&#x27;</span>, inplace=True)  </span><br><span class="line">y = cashflow[<span class="string">&#x27;sum_y&#x27;</span>]</span><br><span class="line">y_train, y_test = temporal_train_test_split(y, test_size=31)  </span><br><span class="line">fh = ForecastingHorizon(y_test.index, is_relative=False)</span><br><span class="line"><span class="comment"># è°ƒå‚</span></span><br><span class="line">forecaster = Prophet(</span><br><span class="line">    seasonality_mode=<span class="string">&#x27;additive&#x27;</span>, </span><br><span class="line">    n_changepoints=20,  </span><br><span class="line">    changepoint_prior_scale=0.001,</span><br><span class="line">    holidays_prior_scale=5,</span><br><span class="line">    seasonality_prior_scale=10  </span><br><span class="line">)</span><br><span class="line">forecaster.fit(y_train)</span><br><span class="line">y_pred = forecaster.predict(fh)  </span><br><span class="line">MAPE = mean_absolute_percentage_error(y_test, y_pred, symmetric=False)</span><br><span class="line"><span class="built_in">print</span>(f<span class="string">&quot;Model:Prophet, MAPE: &#123;MAPE:.2f&#125;&quot;</span>)</span><br><span class="line">plot_series(y_train, y_test, y_pred, labels=[<span class="string">&quot;y_train&quot;</span>, <span class="string">&quot;y_test&quot;</span>, <span class="string">&quot;y_pred&quot;</span>], title=f<span class="string">&#x27;Prophet: &#123;MAPE:.2f&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Model:Prophet, MAPE: 0.49</span><br></pre></td></tr></table></figure>

<p><strong>äºŒã€ç›´æ¥ä½¿ç”¨Prophetå¹¶åŠ å…¥å…¶ä»–ç‰¹å¾</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from prophet import Prophet </span><br><span class="line">from sklearn.metrics import mean_absolute_percentage_error</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–æ•°æ®,è¿‡æ»¤åˆ°2023å¹´</span></span><br><span class="line"><span class="built_in">df</span> = pd.read_csv(<span class="string">&#x27;CashFlowRecordsAll22-23-five.csv&#x27;</span>)</span><br><span class="line"><span class="built_in">df</span> = df.rename(columns=&#123;<span class="string">&#x27;date&#x27;</span>: <span class="string">&#x27;ds&#x27;</span>, <span class="string">&#x27;sum_y&#x27;</span>: <span class="string">&#x27;y&#x27;</span>&#125;)</span><br><span class="line"><span class="comment"># è½¬æ¢æ—¥æœŸåˆ—ä¸ºdatetimeæ ¼å¼</span></span><br><span class="line"><span class="built_in">df</span>[<span class="string">&#x27;ds&#x27;</span>] = pd.to_datetime(<span class="built_in">df</span>[<span class="string">&#x27;ds&#x27;</span>])</span><br><span class="line"><span class="built_in">df</span> = <span class="built_in">df</span>[<span class="built_in">df</span>[<span class="string">&#x27;ds&#x27;</span>] &gt; <span class="string">&#x27;2022-12-31&#x27;</span>]</span><br><span class="line"><span class="comment"># è®¾ç½®æ—¥æœŸä¸ºç´¢å¼•</span></span><br><span class="line"><span class="comment">#df = df.set_index(&#x27;ds&#x27;) </span></span><br><span class="line"><span class="comment"># é€‰å– 2023-06-01 åˆ° 2023-06-30 ä¹‹é—´çš„æ•°æ®</span></span><br><span class="line">train = <span class="built_in">df</span>[(<span class="built_in">df</span>[<span class="string">&#x27;ds&#x27;</span>] &gt;= <span class="string">&#x27;2023-01-01&#x27;</span>) &amp; (<span class="built_in">df</span>[<span class="string">&#x27;ds&#x27;</span>] &lt;= <span class="string">&#x27;2023-06-30&#x27;</span>)]</span><br><span class="line"><span class="comment"># é€‰å– 2023-07-01 åˆ° 2023-07-31 ä¹‹é—´çš„æ•°æ®  </span></span><br><span class="line"><span class="built_in">test</span> = <span class="built_in">df</span>[(<span class="built_in">df</span>[<span class="string">&#x27;ds&#x27;</span>] &gt;= <span class="string">&#x27;2023-07-01&#x27;</span>) &amp; (<span class="built_in">df</span>[<span class="string">&#x27;ds&#x27;</span>] &lt;= <span class="string">&#x27;2023-07-31&#x27;</span>)]</span><br><span class="line"><span class="comment"># å»ºç«‹Prophetæ¨¡å‹,åŒ…å« regressor</span></span><br><span class="line">forecaster = Prophet(</span><br><span class="line">    seasonality_mode=<span class="string">&#x27;additive&#x27;</span>, </span><br><span class="line">    n_changepoints=20,  </span><br><span class="line">    changepoint_prior_scale=0.001,</span><br><span class="line">    holidays_prior_scale=5,</span><br><span class="line">    seasonality_prior_scale=10  </span><br><span class="line">)</span><br><span class="line">forecaster.add_regressor(<span class="string">&#x27;week&#x27;</span>) <span class="comment">#æ¯æ—¥æ˜ŸæœŸå‡ </span></span><br><span class="line">forecaster.add_regressor(<span class="string">&#x27;Monthly&#x27;</span>) <span class="comment">#æœˆåº¦æ€»æ”¶å…¥</span></span><br><span class="line">forecaster.add_regressor(<span class="string">&#x27;holiday&#x27;</span>) <span class="comment">#æ˜¯å¦ä¼‘æ¯</span></span><br><span class="line">forecaster.add_regressor(<span class="string">&#x27;check&#x27;</span>) <span class="comment">#æ˜¯å¦è€ƒæ ¸æ—¥</span></span><br><span class="line">forecaster.add_regressor(<span class="string">&#x27;day&#x27;</span>) <span class="comment">#å‡ å·</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨1-6æœˆæ•°æ®æ‹Ÿåˆ</span></span><br><span class="line">forecaster.fit(train)</span><br><span class="line"><span class="comment"># é¢„æµ‹7æœˆæ¯æ—¥ç°é‡‘æµå…¥</span></span><br><span class="line">future = forecaster.make_future_dataframe(periods=len(<span class="built_in">test</span>))</span><br><span class="line">future = pd.merge(future, <span class="built_in">test</span>[[<span class="string">&#x27;ds&#x27;</span>]], on=<span class="string">&#x27;ds&#x27;</span>, how=<span class="string">&#x27;inner&#x27;</span>)</span><br><span class="line">forecast = forecaster.predict(<span class="built_in">test</span>)</span><br><span class="line"><span class="comment"># è®¡ç®—MAPEè¯„ä¼°é¢„æµ‹æ•ˆæœ</span></span><br><span class="line">y_true = <span class="built_in">test</span>[<span class="string">&#x27;y&#x27;</span>]</span><br><span class="line">y_pred = forecast.loc[forecast[<span class="string">&#x27;ds&#x27;</span>].isin(<span class="built_in">test</span>[<span class="string">&#x27;ds&#x27;</span>]), <span class="string">&#x27;yhat&#x27;</span>]</span><br><span class="line">mape = mean_absolute_percentage_error(y_true, y_pred)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¼˜åŒ–åçš„MAPE: &#x27;</span>, mape)</span><br><span class="line"><span class="comment"># æŸ¥çœ‹é¢„æµ‹ç»“æœ</span></span><br><span class="line"><span class="built_in">print</span>(forecast[[<span class="string">&#x27;ds&#x27;</span>, <span class="string">&#x27;yhat&#x27;</span>, <span class="string">&#x27;yhat_lower&#x27;</span>, <span class="string">&#x27;yhat_upper&#x27;</span>]])</span><br><span class="line"><span class="comment"># é¢„æµ‹7æœˆæ¯æ—¥ç°é‡‘æµå…¥</span></span><br><span class="line">forecast = forecaster.predict(<span class="built_in">test</span>)</span><br><span class="line"><span class="comment"># è®¡ç®—MAPEè¯„ä¼°é¢„æµ‹æ•ˆæœ</span></span><br><span class="line">y_true = <span class="built_in">test</span>[<span class="string">&#x27;y&#x27;</span>]</span><br><span class="line">y_pred = forecast[<span class="string">&#x27;yhat&#x27;</span>]</span><br><span class="line">mape = mean_absolute_percentage_error(y_true, y_pred)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;MAPE: &#x27;</span>, mape)</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MAPE:  0.7522215857136401</span><br></pre></td></tr></table></figure>

<h4 id="ç»“è®ºï¼š"><a href="#ç»“è®ºï¼š" class="headerlink" title="ç»“è®ºï¼š"></a>ç»“è®ºï¼š</h4><p>sktimeæ¡†æ¶ä¸‹çš„Prophetæ— æ³•å¼•å…¥æ–°çš„ç‰¹å¾ï¼Œä½†å¯¹Prophetæœ‰ä¼˜åŒ–ã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/457634985">å¹²è´§ï¼æ—¶é—´åºåˆ—é¢„æµ‹ç¥å™¨-Prophetã€å®ç°ç¯‡ã€ - çŸ¥ä¹ (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/72277a2dd5ad">ç»“åˆ Prophet çš„åŸç†ç†è§£ Prophet çš„ä½¿ç”¨ - ç®€ä¹¦ (jianshu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/86350981">Prophet: æ—¶é—´åºåˆ—é¢„æµ‹åº“ - çŸ¥ä¹ (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://bravey.github.io/2019-12-20-LSTM%E4%B8%8EProphet%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E9%A2%84%E6%B5%8B%E5%AE%9E%E9%AA%8C">LSTMä¸Prophetæ—¶é—´åºåˆ—é¢„æµ‹å®éªŒ | BraveY</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40903057/article/details/95318891">æ—¶é—´åºåˆ—åˆ†æ - AirPassenger_airpassengersæ—¶é—´åºåˆ—æ•°æ®_æ¶¤ç”Ÿï¼ˆbluezï¼‰çš„åšå®¢-CSDNåšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/592814630">2022 å¹´æ—¶é—´åºåˆ—åˆ†ææœ€é¡¶æµçš„ Python åº“ - çŸ¥ä¹ (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/453296592">æ¨è 3 ä¸ª Python æ—¶åºåˆ†æç¥å™¨ï¼ - çŸ¥ä¹ (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/102186988">tsfresh - çŸ¥ä¹ (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/393706324">æ—¶é—´åºåˆ—é¢„æµ‹ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆä¸‰ï¼‰ï¼šæ·±åº¦å­¦ä¹ æ–¹æ³• - çŸ¥ä¹ (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://tech-zh.netlify.app/articles/zh-cn511782/">ğŸ›’ ğŸš˜ ğŸ˜¿ Sktimeï¼šç”¨äºæœºå™¨å­¦ä¹ å’Œæ—¶é—´åºåˆ—çš„ç»Ÿä¸€Pythonåº“ ğŸ¥ ğŸ¥ ğŸ‘©ğŸ¾â€ğŸ¨ (tech-zh.netlify.app)</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43691167/article/details/121189586">sktime_å¦‚ä½•å®‰è£…sktime_Pre.Realçš„åšå®¢-CSDNåšå®¢</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/skyskytotop/article/details/123895815">æ—¶é—´åºåˆ—åº“sktime è¾“å…¥å’Œæ¨¡å‹æ„å»ºä»‹ç»_é¢„æµ‹æ¨¡å‹çš„å¼€å‘ä¸åº”ç”¨ç ”ç©¶çš„åšå®¢-CSDNåšå®¢</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://vbrun-lab.github.io/2023/08/18/2023-08-18/" data-id="cllg7olxh0000jk8b0iqih9ri" data-title="æ—¶é—´åºåˆ—åºåˆ—å­¦ä¹ ï¼ˆäº”ï¼‰--Prophet" class="article-share-link"><span class="fa fa-share">åˆ†äº«</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/" rel="tag">æ—¶é—´åºåˆ—</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">æœºå™¨å­¦ä¹ </a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2023/07/18/2023-07-18/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">åä¸€ç¯‡</strong>
      <div class="article-nav-title">To Do</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%88%E7%8E%87/" rel="tag">æ•ˆç‡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/" rel="tag">æ—¶é—´åºåˆ—</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">æœºå™¨å­¦ä¹ </a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/%E6%95%88%E7%8E%87/" style="font-size: 10px;">æ•ˆç‡</a> <a href="/tags/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/" style="font-size: 20px;">æ—¶é—´åºåˆ—</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 20px;">æœºå™¨å­¦ä¹ </a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">å…«æœˆ 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">ä¸ƒæœˆ 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">å…­æœˆ 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/18/2023-08-18/">æ—¶é—´åºåˆ—åºåˆ—å­¦ä¹ ï¼ˆäº”ï¼‰--Prophet</a>
          </li>
        
          <li>
            <a href="/2023/07/18/2023-07-18/">To Do</a>
          </li>
        
          <li>
            <a href="/2023/06/28/2023-06-28/">æ—¶é—´åºåˆ—ï¼ˆä¸‰ï¼‰â€”â€” SARIMAXå¸¦æœ‰è¡ç”Ÿå˜é‡çš„æ—¶é—´åºåˆ—é¢„æµ‹</a>
          </li>
        
          <li>
            <a href="/2023/06/27/2023-06-27/">æ—¶é—´åºåˆ—ï¼ˆäºŒï¼‰â€”â€”å¤ç°ARIMAé¢„æµ‹AirPassenger</a>
          </li>
        
          <li>
            <a href="/2023/06/17/2023-06-17/">æ—¶é—´åºåˆ—å­¦ä¹ ï¼ˆä¸€ï¼‰â€”â€”åŸºç¡€</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>